# дз №14 (docker-3)
* созданы образы докер-контейнеров с микросервисами приложения (слайды 1-15)
* при создании образа контейнера ui сигнатуры промежуточных образов первых шагов
 из Dockerfile совпадают с образами первых шагов контейнера comment, поэтому
 выполнение идёт не с первого шага, а вытаскивается из кеша.

## Задание со ( * ) {1}
* для передачи передачи переменных окружения в контейнер используется опция `-e`,
поэтому для запуска контейнеров с измененными сетевыми именами, например при
добавлении к ним суффикса `-01` команда должна выглядеть так образом:
```
docker run -d --network=reddit --network-alias=post-db-01 --network-alias=comment-db-01   mongo:latest
docker run -d --network=reddit --network-alias=comment-01 -e COMMENT_DATABASE_HOST=comment-db-01 mac798/comment:1.0
docker run -d --network=reddit --network-alias=post-01 -e POST_DATABASE_HOST=post-db-01 mac798/post:1.0
docker run -d --network=reddit -e POST_SERVICE_HOST=post-01 -e COMMENT_SERVICE_HOST=comment-01 -p 9292:9292 mac798/ui:1.0
```
## задание со слайдов 17-18
* произведено уменьшение размера образа ui

## Задание со ( * ) {2}
* созданы новые версии образов ui и comment на основе alpine linux
* поскольку в alpine используется ruby 2.5 необходимо изменить Gemfile, установив версию haml > 5.0.4
* для уменьшения размера результирующего образа лучше скомпоновать все команды, выполняемые при создании образа в одну команду
* итоговые размеры образов : comment - 53мб, ui - 61.4мб, post - 102мб

##

* запушен контейнер бд с подмонтированным томом, проверено, что данные остаются "на месте" после  перезагрузки контейнера

# дз №13 (docker-2)

* cоздан новый проект в gcloud
* настроена аутентификация gce sdk в новом проекте
* установлена и настроена docker-machine
* повторена практика из лекции с различными уровнями изоляции пространств имен
* в практическом задании с запуском образа tehbilly/htop хорошо видно, что
при запуске в изолированном пространстве имен процессов виден только один процесс --
сама программа htop. При запуске же этого образа с параметром `-pid host` в программе
htop видны все процессы, запущеннные на машине.
* По инструкциям со слайдов создан образ контейнера с установленными бд и сервером приложения
* Создан аккаунт на docker hub
* получившийся образ загружен на docker hub
## задание со ( * )
* создан сценарий ansible docker-install.yml, устанавливающий docker и запускающий службу
* создан сценарий packer, собирающий в gcloud образ ubuntu с установленным docker, используя сценарий ansible
* создана конфигурация terraform запускающая несколько (задается переменной) экземпляров вм с образом, созданном в предыдущем шаге
* создан динамический inventory.pl для ansible
* создан сценарий ansible run-docked-app.yml, который регистрирует и запускает модуль systemd, отвечающий за запуск контейнера docker с установленныс приложением

# дз №12 (docker-1)
* Воспроизведены шаги по интеграции репозитория с каналом slack
* добавлен шаблон описания для pull-request-ов
* добавлен .travis.yml
* воспроизведены шаги со слайлов 1-29 из домашнего задания

# mac798_microservices
mac798 microservices repository
